<!DOCTYPE html>
<html>
<head>
        <title>Chat</title>
        <link rel="stylesheet" href="css/main.css">
</head>
<body>
        <div class="chat">
                <input type="text" class="chat-name" placeholder="Ingresa tu nombre">
                <div class="chat-messages">

                </div>
                <textarea placeholder="Escribe tu mensaje"></textarea>
                <div class="chat-status">Status: <span>Idle</span></div>
        </div>
	
	<script src="http://127.0.0.1:8080/socket.io/socket.io.js"></script>
	
	<script>
		(function() {
			
			var getNode = function(s) {
				return document.querySelector(s);
			},
			
			textarea = getNode('.chat textarea'),
			chatName = getNode('.chat-name');			
			
			try {
				var socket = io.connect('http://127.0.0.1:8080');
			} catch (e) {
				// ahora
			}

			if(socket !== undefined) {
				

				textarea.addEventListener('keydown', function(event) {
					var self = this,
					    name = chatName.value;
					

				if(event.which === 13 && event.shiftKey === false) {					
					socket.emit('input', {
						name: name,
						message: self.value	
					});

					event.preventDefault(); // para el enter no aparezca en la base de datos
				   }

				});
			}
		})();
	</script>	


</body>
</html>



